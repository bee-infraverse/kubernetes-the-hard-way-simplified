[req]
distinguished_name = req_distinguished_name
prompt             = no
x509_extensions    = ca_x509_extensions

[ca_x509_extensions]
basicConstraints = CA:TRUE
keyUsage         = cRLSign, keyCertSign

[req_distinguished_name]
C  = ${COUNTRY}
ST = ${STATE}
L  = ${CITY}
CN  = CA

# etcd-client
[etcd-client]
distinguished_name = etcd-client_distinguished_name
prompt             = no
req_extensions     = etcd-client_req_extensions

[etcd-client_req_extensions]
basicConstraints     = CA:FALSE
extendedKeyUsage     = clientAuth
keyUsage             = critical, digitalSignature, keyEncipherment
nsCertType           = client
nsComment            = "ectd-client Certificate"
subjectAltName       = DNS:etcd-client, IP:127.0.0.1
subjectKeyIdentifier = hash

[etcd-client_distinguished_name]
CN = etcd-client
O  = ectd-client
C  = ${COUNTRY}
ST = ${STATE}
L  = ${CITY}

# etcd-apiserver-client
[etcd-apiserver-client]
distinguished_name = etcd-apiserver-client_distinguished_name
prompt             = no
req_extensions     = etcd-apiserver-client_req_extensions

[etcd-apiserver-client_req_extensions]
basicConstraints     = CA:FALSE
extendedKeyUsage     = clientAuth
keyUsage             = critical, digitalSignature, keyEncipherment
nsCertType           = client
nsComment            = "ectd-apiserver-client Certificate"
subjectAltName       = DNS:etcd-apiserver-client, IP:127.0.0.1
subjectKeyIdentifier = hash

[etcd-apiserver-client_distinguished_name]
CN = etcd-apiserver-client
O  = ectd-apiserver-client
C  = ${COUNTRY}
ST = ${STATE}
L  = ${CITY}

# etcd-server
[etcd-server]
distinguished_name = etcd-server_distinguished_name
prompt             = no
req_extensions     = etcd-server_req_extensions

[etcd-server_req_extensions]
basicConstraints     = CA:FALSE
extendedKeyUsage     = clientAuth,serverAuth
keyUsage             = critical, digitalSignature, keyEncipherment
nsCertType           = client
nsComment            = "ectd-server Certificate"
subjectAltName       = DNS:etcd-server, IP:127.0.0.1
subjectKeyIdentifier = hash

[etcd-server_distinguished_name]
CN = etcd-server
O  = ectd-server
C  = ${COUNTRY}
ST = ${STATE}
L  = ${CITY}

# etcd-peer
[etcd-peer]
distinguished_name = etcd-peer_distinguished_name
prompt             = no
req_extensions     = etcd-peer_req_extensions

[etcd-peer_req_extensions]
basicConstraints     = CA:FALSE
extendedKeyUsage     = clientAuth,serverAuth
keyUsage             = critical, digitalSignature, keyEncipherment
nsCertType           = client
nsComment            = "ectd-peer Certificate"
subjectAltName       = DNS:etcd-peer, IP:127.0.0.1
subjectKeyIdentifier = hash

[etcd-peer_distinguished_name]
CN = etcd-peer
O  = ectd-peer
C  = ${COUNTRY}
ST = ${STATE}
L  = ${CITY}